<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Telegram Bridge Dashboard</title>
  <script>
    async function loadMessages() {
      const res = await fetch("/messages");
      const data = await res.json();
      const container = document.getElementById("messages");
      container.innerHTML = "";
      data.messages.slice().reverse().forEach(msg => {
        const item = document.createElement("div");
        item.style.borderBottom = "1px solid #ccc";
        item.style.padding = "10px";
        if (msg.type === "text") {
          item.textContent = `${msg.user}: ${msg.content}`;
        } else if (msg.type === "photo") {
          item.innerHTML = `<b>${msg.user}</b>:<br><img src="/downloads/${msg.content}" width="300">`;
        } else if (msg.type === "video") {
          item.innerHTML = `<b>${msg.user}</b>:<br><video width="300" controls><source src="/downloads/${msg.content}"></video>`;
        } else if (msg.type === "audio") {
          item.innerHTML = `<b>${msg.user}</b>:<br><audio controls src="/downloads/${msg.content}"></audio>`;
        } else if (msg.type === "document") {
          item.innerHTML = `<b>${msg.user}</b>: <a href="/downloads/${msg.content}" target="_blank">${msg.content}</a>`;
        } else if (msg.type === "location") {
          const lat = msg.content.lat;
          const lon = msg.content.lon;
          item.innerHTML = `<b>${msg.user}</b>: shared location: <a href="https://maps.google.com/?q=${lat},${lon}" target="_blank">(${lat}, ${lon})</a>`;
        }
        container.appendChild(item);
      });
    }
    setInterval(loadMessages, 3000);
    window.onload = loadMessages;
  </script>
</head>
<body>
  <h1>ðŸ“¨ Telegram Bot Dashboard</h1>
  <div id="messages"></div>
</body>
</html>
